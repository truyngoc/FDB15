@model FDB.Models.NT_TT_THITRUONG

@{
    ViewBag.Title = "Edit";
}



@using (Html.BeginForm("Edit", "NT_TT_THITRUONG", FormMethod.Post))
{
    {
        <div class="container fdb-div-content fdb-div-corner-all">
            @Html.AntiForgeryToken()



            <div class="form-horizontal">
                @Html.ValidationSummary(true)
                <br />


                <div class="col-md-8">
                    <fieldset class="fdb-scheduler-border">
                        <legend class="fdb-title-form text-center">Giá thủy sản trong nước</legend>
                        <div class="form-group">
                            <div class="control-label col-md-3 text-left">Đối tượng nuôi<label style="color:red;">(*)</label></div>
                            <div class="col-md-9">
                                @Html.DropDownListFor(model => model.DM_DOITUONG_GIA_THITRUONGID, (SelectList)ViewBag.DM_DOITUONG_NUOIs, "--Chọn đối tượng nuôi--", new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.DM_DOITUONG_GIA_THITRUONGID)
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="control-label col-md-3 text-left">Ngày thu thập<label style="color:red;">(*)</label></div>

                            <div class="col-md-9">
                                @Html.TextBoxFor(model => model.NGAY_THUTHAP, "{0:dd/MM/yyyy}", new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.NGAY_THUTHAP)
                                <span id="lblValidateNGAY_THUTHAP" style="color: #b94a48; display: none; "></span>
                            </div>

                        </div>

                        <div class="form-group">
                            <div class="control-label col-md-3 text-left">
                                Giá thành từ (VNĐ/kg)
                            </div>
                            <div class="col-md-2">
                                <span id="lblValidateGIA" style="color: #b94a48; display: none; "></span>

                                @Html.TextBoxFor(m => m.GIA_THANH_TU, new { @class = "form-control", data_val_number = "Giá thành từ phải là số.", })
                                @Html.ValidationMessageFor(model => model.GIA_THANH_TU)
                            </div>

                            <div class="control-label col-md-2">
                                Đến
                            </div>
                            <div class="col-md-2">
                                @Html.TextBoxFor(m => m.GIA_THANH_DEN, new { @class = "form-control", @type = "text", data_val_number = "Giá thành đến phải là số." })
                                @Html.ValidationMessageFor(model => model.GIA_THANH_DEN)

                            </div>
                        </div>

                        <div class="form-group">
                            <div class="control-label col-md-3 text-left">
                                Giá giống từ (đồng/con)
                            </div>
                            <div class=" col-md-2">
                                @Html.TextBoxFor(m => m.GIA_GIONG_TU, new { @class = "form-control", @type = "text", data_val_number = "Giá giống từ phải là số." })
                                @Html.ValidationMessageFor(model => model.GIA_GIONG_TU)

                            </div>

                            <div class="control-label col-md-2">
                                Đến
                            </div>
                            <div class="col-md-2">
                                @Html.TextBoxFor(m => m.GIA_GIONG_DEN, new { @class = "form-control", @type = "text", data_val_number = "Giá giống đến phải là số." })
                                @Html.ValidationMessageFor(model => model.GIA_GIONG_DEN)

                            </div>
                        </div>

                        <div class="form-group">
                            <div class="control-label col-md-3 text-left">Giá thức ăn từ (VNĐ/kg)</div>
                            <div class="col-md-2">
                                @Html.TextBoxFor(m => m.GIA_THUCAN_TU, new { @class = "form-control", @type = "text", data_val_number = "Giá thức ăn từ phải là số." })
                                @Html.ValidationMessageFor(model => model.GIA_THUCAN_TU)
                            </div>

                            <div class="control-label col-md-2">Đến</div>
                            <div class="col-md-2">
                                @Html.TextBoxFor(m => m.GIA_THUCAN_DEN, new { @class = "form-control", @type = "text", data_val_number = "Giá thức ăn đến phải là số." })
                                @Html.ValidationMessageFor(model => model.GIA_THUCAN_DEN)
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="control-label col-md-3 text-left">Giá bán từ (VNĐ/kg)</div>

                            <div class="col-md-2">
                                @Html.TextBoxFor(m => m.GIA_BAN_TU, new { @class = "form-control", @type = "text", data_val_number = "Giá bán từ phải là số." })
                                @Html.ValidationMessageFor(model => model.GIA_BAN_TU)
                            </div>
                            <div class="control-label col-md-2">Đến</div>

                            <div class="col-md-2">
                                @Html.TextBoxFor(m => m.GIA_BAN_DEN, new { @class = "form-control", @type = "text", data_val_number = "Giá bán đến phải là số." })
                                @Html.ValidationMessageFor(model => model.GIA_BAN_DEN)
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="control-label col-md-3 text-left">Kích cỡ</div>

                            <div class="col-md-9">
                                @Html.TextBoxFor(m => m.KICHCO, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.KICHCO)
                            </div>

                        </div>

                        <div class="form-group">
                            <div class="control-label col-md-3 text-left">Nơi thu thập</div>

                            <div class="col-md-9">
                                @Html.TextBoxFor(m => m.NOITHUTHAP, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.NOITHUTHAP)
                            </div>
                        </div>



                        @*<div class="form-group">
                                <div class="control-label col-md-2">Ngày nhập máy</div>

                                <div class="col-md-4">
                                    @Html.TextBoxFor(model => model.NGAY_NM, new { @class = "form-control", @readonly = true })
                                    @Html.ValidationMessageFor(model => model.NGAY_NM)
                                    <span id="lblValidateNGAY_NM" style="color: #b94a48; display: none; "></span>
                                </div>

                                <div class="control-label col-md-2"></div>

                                <div class="col-md-4">

                                </div>
                            </div>*@

                        <div class="form-group">

                            <div class="control-label col-md-3 text-left">Tỉnh/Thành phố</div>
                            <div class="col-md-9">
                                @Html.DropDownListFor(model => model.MA_TINHTP, (SelectList)ViewBag.DTINHTPs, new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.MA_TINHTP)
                            </div>
                        </div>

                    </fieldset>
                </div>
            </div>
        </div>
        <br />

        <div class="row">
            <div class="col-md-12">
                <button type="submit" class="btn btn-danger btn-sm" id="btnsubmit">
                    <span class="glyphicon glyphicon-floppy-disk"></span> Cập nhật
                </button>
                &nbsp;
                @Html.ActionLink("Quay lại", "Index", "NT_TT_THITRUONG", null, new { @class = "btn btn-primary btn-sm" })
            </div>
        </div>

    }

}

<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
<script src="~/Scripts/additional-methods.min.js"></script>
<script src="~/Scripts/jquery-ui-1.11.4.js"></script>
<script src="//code.jquery.com/ui/1.11.2/jquery-ui.js" type="text/javascript"></script>
<script src="~/Scripts/jquery.maskedinput.js"></script>
<script src="~/Scripts/jquery.maskMoney.js"></script>
<script src="~/Scripts/jquery.number.js"></script>
<script src="~/Scripts/datepicker.js"></script>
<script src="~/Scripts/moment.js"></script>
<script src="~/Scripts/CustomValidation.js"></script>

<script type="text/javascript">
    $("#NGAY_THUTHAP").datepicker({
        changeMonth: true,
        changeYear: true,

        dateFormat: 'dd/mm/yy'
    });


    $("#NGAY_THUTHAP").mask("99/99/9999", { placeholder: "dd/mm/yyyy" });


    $("#GIA_THANH_TU").number(true, 0, '.', ',');
    $("#GIA_THANH_DEN").number(true, 0, '.', ',');
    $("#GIA_GIONG_TU").number(true, 0, '.', ',');
    $("#GIA_GIONG_DEN").number(true, 0, '.', ',');

    $("#GIA_THUCAN_TU").number(true, 0, '.', ',');
    $("#GIA_THUCAN_DEN").number(true, 0, '.', ',');
    $("#GIA_BAN_TU").number(true, 0, '.', ',');
    $("#GIA_BAN_DEN").number(true, 0, '.', ',');


    var validateNGAYNHAP = true;

    $('#btnsubmit').click(function () {

        //validate thang < thang hien tai
        if (validateNGAYNHAP == false) {
            $('#lblValidateNGAY_THUTHAP').html('Ngày thu thập không được lớn hơn ngày hiện tại!');
            $('#lblValidateNGAY_THUTHAP').attr("style", "display:block;color: #b94a48;font-size: 12px;line-height: 1.428");
            return false;
        }
        else {
            $('#lblValidateNGAY_THUTHAP').html('');
            $('#lblValidateNGAY_THUTHAP').attr("style", "display:none");

        }
        //-----------END validate thang < thang hien tai

        //bat buoc nhap phân loại giá
        var valid = true;

        if ($('input[type=text]').val.length == 0) {
            $('#lblValidateGIA').html('Bắt buộc nhập một trong những phân loại giá!');
            $('#lblValidateGIA').attr("style", "display:block;color: #b94a48;font-size: 12px;line-height: 1.428");
            return valid = false;
        }
        else {
            valid = true;
        }


    }
     );

    //lblValidateNGAY_THUTHAP
    $("#NGAY_THUTHAP").change(function () {
        var someDate = $("#NGAY_THUTHAP").val();
        var currentDate = new Date();
        var year = currentDate.getFullYear();
        var month = currentDate.getMonth() + 1;
        var day = currentDate.getDate();

        var day_2 = day;
        if (day < 10)
            day_2 = '0' + day.toString();

        var month_2 = month;
        if (month < 10)
            month_2 = '0' + month.toString();


        if (moment(someDate, 'DD/MM/YYYY') > moment(day_2 + '/' + month_2 + '/' + year, 'DD/MM/YYYY')) {
            $('#lblValidateNGAY_THUTHAP').html('Ngày thu thập không được lớn hơn ngày hiện tại!');
            $('#lblValidateNGAY_THUTHAP').attr("style", "display:block;color: #b94a48;font-size: 12px;line-height: 1.428");
            validateNGAYNHAP = false;
        }

        else {
            $('#lblValidateNGAY_THUTHAP').html('');
            $('#lblValidateNGAY_THUTHAP').attr("style", "display:none");
            validateNGAYNHAP = true;
        }



    });







</script>



